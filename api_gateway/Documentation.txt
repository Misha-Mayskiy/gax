–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API Gateway
    –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    API Gateway - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ GAX (Go Audio eXperience). –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º.
    –ë–∞–∑–æ–≤—ã–π URL: http://localhost:8080
    
        –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫—É–∫–∞—Ö:

    Cookie: jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

        GET /health

        –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

        –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

        bash
        curl -X GET "http://localhost:8080/health"
        –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

        json
        {
        "status": "ok",
        "service": "api-gateway",
        "timestamp": 1700000000,
        "version": "v1"
        }

         User Service
            1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            PUT /user/create

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "uuid": "user-123",
            "email": "user@example.com",
            "user_name": "John Doe",
            "avatar": "https://example.com/avatar.jpg",
            "about_me": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –ª—é–±–∏—Ç–µ–ª—å –º—É–∑—ã–∫–∏",
            "friends": ["user-456", "user-789"]
            }
            –ü—Ä–∏–º–µ—Ä:

            bash
            curl -X PUT "http://localhost:8080/user/create" \
            -H "Content-Type: application/json" \
            -d '{
                "uuid": "user-123",
                "email": "user@example.com",
                "user_name": "John Doe"
            }'
            2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            PATCH /user/update

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "uuid": "user-123",
            "user_name": "John Updated",
            "about_me": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
            }
            3. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            DELETE /user/delete

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "uuid": "user-123"
            }
            4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            GET /user/get?uuid=user-123

            –ü—Ä–∏–º–µ—Ä:

            bash
            curl -X GET "http://localhost:8080/user/get?uuid=user-123" \
            -H "Cookie: jwtToken=eyJ..."
            5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
            POST /user/set_online

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "uuid": "user-123",
            "ttl_seconds": 300
            }
            6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
            GET /user/is_online?uuid=user-123

            7. –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            GET /user/get_online_users

         Chat Service
            1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç-—á–∞—Ç–∞
            POST /chat/create-direct

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "user_id_1": "user-123",
            "user_id_2": "user-456"
            }
            2. –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞
            POST /chat/create-group

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "creator_id": "user-123",
            "name": "–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π —á–∞—Ç",
            "participants": ["user-123", "user-456", "user-789"]
            }
            3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Ç–µ
            GET /chat/get?chat_id=chat-123

            4. –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            GET /chat/list?user_id=user-123&limit=20&offset=0

            üíå Message Service
            1. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
            POST /chat/message/send

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "chat_id": "chat-123",
            "sender_id": "user-123",
            "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
            "content_type": "text"
            }
            2. –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
            GET /chat/messages/list?chat_id=chat-123&limit=50&offset=0

            3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            PATCH /chat/message/update

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "message_id": "msg-123",
            "content": "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"
            }
            4. –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            DELETE /chat/message/delete

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "message_id": "msg-123",
            "delete_type": "soft"
            }
            5. –û—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ
            POST /chat/message/mark-read

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "message_id": "msg-123",
            "user_id": "user-456"
            }
            6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            POST /chat/message/toggle-saved

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "message_id": "msg-123",
            "user_id": "user-456"
            }
        Room Service
            1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
            POST /room/create

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "creator_id": "user-123",
            "name": "–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞",
            "video_url": "https://youtube.com/watch?v=abc123",
            "is_public": true
            }
            2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
            POST /room/join

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "room_id": "room-123",
            "user_id": "user-456"
            }
            3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º
            POST /room/playback

            –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

            json
            {
            "room_id": "room-123",
            "action": "play",
            "timestamp": 1234567890
            }
            –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

            play - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

            pause - –ø–∞—É–∑–∞

            seek - –ø–µ—Ä–µ–º–æ—Ç–∫–∞

            stop - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

            4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã
            GET /room/state?room_id=room-123

        WebSocket –¥–ª—è –∫–æ–º–Ω–∞—Ç
            WebSocket Endpoint: ws://localhost:8080/room/ws/{room_id}

            –ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

            javascript
            const socket = new WebSocket("ws://localhost:8080/room/ws/room-123");
            –°–æ–æ–±—â–µ–Ω–∏—è (JSON):

            –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:

            json
            {
            "type": "join",
            "user_id": "user-123",
            "username": "John"
            }
            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º:

            json
            {
            "type": "playback",
            "action": "play",
            "position": 120.5,
            "volume": 0.8,
            "timestamp": 1234567890
            }
            –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç:

            json
            {
            "type": "chat",
            "user_id": "user-123",
            "message": "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!"
            }
        
        Search Service
            GET /search?q=–º—É–∑—ã–∫–∞&type=video&limit=10&offset=0&highlight=true

            –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

            q - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

            type - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (video, music, user, etc.)

            limit - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

            offset - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

            highlight - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (true/false)

            –ü—Ä–∏–º–µ—Ä:

            bash
            curl -X GET "http://localhost:8080/search?q=rock%20music&type=video&limit=5" \
            -H "Cookie: jwtToken=eyJ..."
        
        Media Service
            1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
            POST /media/upload

            Form Data:

            file: —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

            chat_id: ID —á–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

            –ü—Ä–∏–º–µ—Ä:

            bash
            curl -X POST "http://localhost:8080/media/upload" \
            -H "Cookie: jwtToken=eyJ..." \
            -F "file=@/path/to/file.mp3" \
            -F "user_id=user-123" \
            -F "chat_id=chat-456"
            2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
            GET /media/download?file_id=file-123

            3. –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
            GET /media/meta?file_id=file-123

            4. –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
            DELETE /media/delete?file_id=file-123&user_id=user-123

            5. –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            GET /media/list?user_id=user-123&limit=20&offset=0

    –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
        –ö–æ–¥	–û–ø–∏—Å–∞–Ω–∏–µ
        200	–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
        201	–°–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
        400	–ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
        401	–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        403	–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
        404	–ù–µ –Ω–∞–π–¥–µ–Ω–æ
        500	–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞